(()=>{function u(){let o=document.querySelector("[data-mobile-menu-toggle]"),t=document.querySelector("[data-mobile-menu-close]"),e=document.getElementById("mobile-menu"),n=document.querySelector("[data-mobile-menu-overlay]");if(!e||!o)return;o.addEventListener("click",()=>{e.classList.add("is-open"),n?.classList.add("is-open"),o.setAttribute("aria-expanded","true"),e.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden"});let a=()=>{e.classList.remove("is-open"),n?.classList.remove("is-open"),o.setAttribute("aria-expanded","false"),e.setAttribute("aria-hidden","true"),document.body.style.overflow=""};t?.addEventListener("click",a),n?.addEventListener("click",a),document.addEventListener("keydown",r=>{r.key==="Escape"&&e.classList.contains("is-open")&&a()}),L()}function L(){let o=document.querySelector(".site-header.sticky");if(!o)return;let t=0,e=100;window.addEventListener("scroll",()=>{let n=window.pageYOffset;if(n<=0){o.classList.remove("header-hidden");return}n>t&&n>e?o.classList.add("header-hidden"):n<t&&o.classList.remove("header-hidden"),t=n},{passive:!0})}function g(){let o=document.querySelectorAll('img[loading="lazy"]');if("loading"in HTMLImageElement.prototype)o.forEach(t=>{t.classList.add("lazy-fade"),t.complete?t.classList.add("loaded"):t.addEventListener("load",()=>{t.classList.add("loaded")},{once:!0})});else{let t=new IntersectionObserver((e,n)=>{e.forEach(a=>{if(a.isIntersecting){let r=a.target;r.src=r.dataset.src||r.src,r.classList.add("loaded"),n.unobserve(r)}})});o.forEach(e=>{t.observe(e)})}}function f(){let o=document.querySelectorAll("[data-theme-toggle]"),t=document.documentElement,e=localStorage.getItem("greenergy-theme"),n=window.matchMedia("(prefers-color-scheme: dark)").matches;(e==="dark"||!e&&n)&&t.classList.add("dark"),o.forEach(a=>{a.addEventListener("click",()=>{t.classList.toggle("dark");let r=t.classList.contains("dark");localStorage.setItem("greenergy-theme",r?"dark":"light")})}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",a=>{localStorage.getItem("greenergy-theme")||t.classList.toggle("dark",a.matches)})}var m=()=>{let o=document.querySelectorAll(".js-counter");if(o.length===0)return;let t=a=>{let r=parseFloat(a.getAttribute("data-target")),s=2e3,d=20,p=s/d,l=r/p,i=0,c=setInterval(()=>{i+=l,i>=r?(a.innerText=Math.floor(r).toLocaleString(),clearInterval(c)):a.innerText=Math.floor(i).toLocaleString()},d)},e={threshold:.5},n=new IntersectionObserver((a,r)=>{a.forEach(s=>{s.isIntersecting&&(t(s.target),r.unobserve(s.target))})},e);o.forEach(a=>{n.observe(a)})};function v(){let o=document.querySelectorAll(".js-swiper-init");if(o.length!==0){if(typeof Swiper>"u"){console.warn("Swiper library is not loaded. Carousel cannot be initialized.");return}o.forEach(t=>{let e={slidesPerView:1,spaceBetween:24,loop:!0,autoplay:{delay:5e3,disableOnInteraction:!1},observer:!0,observeParents:!0,pagination:{el:t.querySelector(".swiper-pagination")||t.parentElement.querySelector(".swiper-pagination"),clickable:!0},navigation:{nextEl:t.querySelector(".swiper-button-next")||t.parentElement.querySelector(".swiper-button-next"),prevEl:t.querySelector(".swiper-button-prev")||t.parentElement.querySelector(".swiper-button-prev")}},n={};if(t.dataset.swiperConfig)try{n=JSON.parse(t.dataset.swiperConfig)}catch(r){console.error("Invalid Swiper Config JSON for:",t,r)}let a={...e,...n};n.navigation&&(a.navigation={...e.navigation,...n.navigation}),n.autoplay&&(a.autoplay={...e.autoplay,...n.autoplay}),n.pagination&&(a.pagination={...e.pagination,...n.pagination}),new Swiper(t,a)})}}function y(){document.addEventListener("click",function(o){let t=o.target.closest(".js-ajax-pagination-link");if(!t)return;o.preventDefault();let e=t.closest(".js-ajax-grid");if(!e)return;let n=e.querySelector(".js-ajax-grid-content"),a=e.querySelector(".pagination"),r=t.dataset.page,s=e.dataset.queryArgs,d=e.dataset.templatePart||"";if(!r||!s)return;let p=e.dataset.loaderText||"\u062C\u0627\u0631\u064A \u062C\u0644\u0628 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A";e.classList.add("is-loading","pointer-events-none"),e.querySelector(".ajax-loader")||e.insertAdjacentHTML("afterbegin",`
                <div class="ajax-loader">
                    <div class="ajax-loader-container">
                        <div class="ajax-loader-spinner-wrapper">
                            <div class="ajax-loader-spinner"></div>
                            <div class="ajax-loader-logo">
                                <i class="fas fa-leaf text-2xl"></i>
                            </div>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="ajax-loader-text">${p}</div>
                            <div class="ajax-loader-dots">
                                <div class="ajax-loader-dot"></div>
                                <div class="ajax-loader-dot"></div>
                                <div class="ajax-loader-dot"></div>
                            </div>
                        </div>
                    </div>
                </div>
            `);let l=new FormData;l.append("action","greenergy_load_posts"),l.append("nonce",greenergyData.nonce),l.append("page",r),l.append("query_args",s),d&&l.append("template_part",d),fetch(greenergyData.ajaxUrl,{method:"POST",body:l}).then(i=>i.json()).then(i=>{if(i.success){n&&(n.innerHTML=i.data.content);let c=e.querySelector(".js-ajax-pagination-wrapper")||e.querySelector(".pagination")||e.querySelector(".greenergy-pagination");c?c.classList.contains("js-ajax-pagination-wrapper")?c.innerHTML=i.data.pagination:c.outerHTML=i.data.pagination:e.insertAdjacentHTML("beforeend",i.data.pagination),typeof AOS<"u"&&setTimeout(()=>{AOS.refreshHard()},100);let h=e.getBoundingClientRect().top+window.pageYOffset+-100;window.scrollTo({top:h,behavior:"smooth"})}else console.error("AJAX Error:",i)}).catch(i=>{console.error("Fetch Error:",i)}).finally(()=>{setTimeout(()=>{e.classList.remove("is-loading","pointer-events-none")},800)})})}document.addEventListener("DOMContentLoaded",()=>{u(),g(),f(),m(),v(),y(),typeof AOS<"u"&&AOS.init({duration:800,easing:"ease-in-out",once:!0,offset:50})});window.Greenergy={version:"1.0.0"};})();
