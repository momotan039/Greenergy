(()=>{function p(){let r=document.querySelector("[data-mobile-menu-toggle]"),e=document.querySelector("[data-mobile-menu-close]"),t=document.getElementById("mobile-menu"),n=document.querySelector("[data-mobile-menu-overlay]");if(!t||!r)return;r.addEventListener("click",()=>{t.classList.add("is-open"),n?.classList.add("is-open"),r.setAttribute("aria-expanded","true"),t.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden"});let o=()=>{t.classList.remove("is-open"),n?.classList.remove("is-open"),r.setAttribute("aria-expanded","false"),t.setAttribute("aria-hidden","true"),document.body.style.overflow=""};e?.addEventListener("click",o),n?.addEventListener("click",o),document.addEventListener("keydown",a=>{a.key==="Escape"&&t.classList.contains("is-open")&&o()}),L()}function L(){let r=document.querySelector(".site-header.sticky");if(!r)return;let e=0,t=100;window.addEventListener("scroll",()=>{let n=window.pageYOffset;if(n<=0){r.classList.remove("header-hidden");return}n>e&&n>t?r.classList.add("header-hidden"):n<e&&r.classList.remove("header-hidden"),e=n},{passive:!0})}function g(){let r=document.querySelectorAll('img[loading="lazy"]');if("loading"in HTMLImageElement.prototype)r.forEach(e=>{e.classList.add("lazy-fade"),e.complete?e.classList.add("loaded"):e.addEventListener("load",()=>{e.classList.add("loaded")},{once:!0})});else{let e=new IntersectionObserver((t,n)=>{t.forEach(o=>{if(o.isIntersecting){let a=o.target;a.src=a.dataset.src||a.src,a.classList.add("loaded"),n.unobserve(a)}})});r.forEach(t=>{e.observe(t)})}}function f(){let r=document.querySelectorAll("[data-theme-toggle]"),e=document.documentElement,t=localStorage.getItem("greenergy-theme"),n=window.matchMedia("(prefers-color-scheme: dark)").matches;(t==="dark"||!t&&n)&&e.classList.add("dark"),r.forEach(o=>{o.addEventListener("click",()=>{e.classList.toggle("dark");let a=e.classList.contains("dark");localStorage.setItem("greenergy-theme",a?"dark":"light")})}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>{localStorage.getItem("greenergy-theme")||e.classList.toggle("dark",o.matches)})}var m=()=>{let r=document.querySelectorAll(".js-counter");if(r.length===0)return;let e=o=>{let a=parseFloat(o.getAttribute("data-target")),s=2e3,d=20,c=s/d,i=a/c,l=0,u=setInterval(()=>{l+=i,l>=a?(o.innerText=Math.floor(a).toLocaleString(),clearInterval(u)):o.innerText=Math.floor(l).toLocaleString()},d)},t={threshold:.5},n=new IntersectionObserver((o,a)=>{o.forEach(s=>{s.isIntersecting&&(e(s.target),a.unobserve(s.target))})},t);r.forEach(o=>{n.observe(o)})};function y(){let r=document.querySelectorAll(".js-swiper-init");if(r.length!==0){if(typeof Swiper>"u"){console.warn("Swiper library is not loaded. Carousel cannot be initialized.");return}r.forEach(e=>{let t={slidesPerView:1,spaceBetween:24,loop:!0,autoplay:{delay:5e3,disableOnInteraction:!1},observer:!0,observeParents:!0,pagination:{el:e.querySelector(".swiper-pagination")||e.parentElement.querySelector(".swiper-pagination"),clickable:!0},navigation:{nextEl:e.querySelector(".swiper-button-next")||e.parentElement.querySelector(".swiper-button-next"),prevEl:e.querySelector(".swiper-button-prev")||e.parentElement.querySelector(".swiper-button-prev")}},n={};if(e.dataset.swiperConfig)try{n=JSON.parse(e.dataset.swiperConfig)}catch(a){console.error("Invalid Swiper Config JSON for:",e,a)}let o={...t,...n};n.navigation&&(o.navigation={...t.navigation,...n.navigation}),n.autoplay&&(o.autoplay={...t.autoplay,...n.autoplay}),n.pagination&&(o.pagination={...t.pagination,...n.pagination}),new Swiper(e,o)})}}function h(){document.addEventListener("click",function(r){let e=r.target.closest(".js-ajax-pagination-link");if(!e)return;r.preventDefault();let t=e.closest(".js-ajax-grid");if(!t)return;let n=t.querySelector(".js-ajax-grid-content"),o=t.querySelector(".pagination"),a=e.dataset.page,s=t.dataset.queryArgs,d=t.dataset.templatePart||"";if(!a||!s)return;t.classList.add("opacity-50","pointer-events-none");let c=new FormData;c.append("action","greenergy_load_posts"),c.append("nonce",greenergyData.nonce),c.append("page",a),c.append("query_args",s),d&&c.append("template_part",d),fetch(greenergyData.ajaxUrl,{method:"POST",body:c}).then(i=>i.json()).then(i=>{if(i.success){n&&(n.innerHTML=i.data.content);let l=t.querySelector(".pagination");l?l.outerHTML=i.data.pagination:t.insertAdjacentHTML("beforeend",i.data.pagination),typeof AOS<"u"&&setTimeout(()=>{AOS.refreshHard()},100);let v=t.getBoundingClientRect().top+window.pageYOffset+-100;window.scrollTo({top:v,behavior:"smooth"})}else console.error("AJAX Error:",i)}).catch(i=>{console.error("Fetch Error:",i)}).finally(()=>{t.classList.remove("opacity-50","pointer-events-none")})})}document.addEventListener("DOMContentLoaded",()=>{p(),g(),f(),m(),y(),h(),typeof AOS<"u"&&AOS.init({duration:800,easing:"ease-in-out",once:!0,offset:50})});window.Greenergy={version:"1.0.0"};})();
