(()=>{function p(){let a=document.querySelector("[data-mobile-menu-toggle]"),t=document.querySelector("[data-mobile-menu-close]"),e=document.getElementById("mobile-menu"),n=document.querySelector("[data-mobile-menu-overlay]");if(!e||!a)return;a.addEventListener("click",()=>{e.classList.add("is-open"),n?.classList.add("is-open"),a.setAttribute("aria-expanded","true"),e.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden"});let o=()=>{e.classList.remove("is-open"),n?.classList.remove("is-open"),a.setAttribute("aria-expanded","false"),e.setAttribute("aria-hidden","true"),document.body.style.overflow=""};t?.addEventListener("click",o),n?.addEventListener("click",o),document.addEventListener("keydown",r=>{r.key==="Escape"&&e.classList.contains("is-open")&&o()}),L()}function L(){let a=document.querySelector(".site-header.sticky");if(!a)return;let t=0,e=100;window.addEventListener("scroll",()=>{let n=window.pageYOffset;if(n<=0){a.classList.remove("header-hidden");return}n>t&&n>e?a.classList.add("header-hidden"):n<t&&a.classList.remove("header-hidden"),t=n},{passive:!0})}function f(){let a=document.querySelectorAll('img[loading="lazy"]');if("loading"in HTMLImageElement.prototype)a.forEach(t=>{t.classList.add("lazy-fade"),t.complete?t.classList.add("loaded"):t.addEventListener("load",()=>{t.classList.add("loaded")},{once:!0})});else{let t=new IntersectionObserver((e,n)=>{e.forEach(o=>{if(o.isIntersecting){let r=o.target;r.src=r.dataset.src||r.src,r.classList.add("loaded"),n.unobserve(r)}})});a.forEach(e=>{t.observe(e)})}}function g(){let a=document.querySelectorAll("[data-theme-toggle]"),t=document.documentElement,e=localStorage.getItem("greenergy-theme"),n=window.matchMedia("(prefers-color-scheme: dark)").matches;(e==="dark"||!e&&n)&&t.classList.add("dark"),a.forEach(o=>{o.addEventListener("click",()=>{t.classList.toggle("dark");let r=t.classList.contains("dark");localStorage.setItem("greenergy-theme",r?"dark":"light")})}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>{localStorage.getItem("greenergy-theme")||t.classList.toggle("dark",o.matches)})}var m=()=>{let a=document.querySelectorAll(".js-counter");if(a.length===0)return;let t=o=>{let r=parseFloat(o.getAttribute("data-target")),i=2e3,d=20,l=i/d,c=r/l,s=0,u=setInterval(()=>{s+=c,s>=r?(o.innerText=Math.floor(r).toLocaleString(),clearInterval(u)):o.innerText=Math.floor(s).toLocaleString()},d)},e={threshold:.5},n=new IntersectionObserver((o,r)=>{o.forEach(i=>{i.isIntersecting&&(t(i.target),r.unobserve(i.target))})},e);a.forEach(o=>{n.observe(o)})};function v(){let a=document.querySelectorAll(".js-swiper-init");if(a.length!==0){if(typeof Swiper>"u"){console.warn("Swiper library is not loaded. Carousel cannot be initialized.");return}a.forEach(t=>{let e={slidesPerView:1,spaceBetween:24,loop:!0,autoplay:{delay:5e3,disableOnInteraction:!1},observer:!0,observeParents:!0,pagination:{el:t.querySelector(".swiper-pagination")||t.parentElement.querySelector(".swiper-pagination"),clickable:!0},navigation:{nextEl:t.querySelector(".swiper-button-next")||t.parentElement.querySelector(".swiper-button-next"),prevEl:t.querySelector(".swiper-button-prev")||t.parentElement.querySelector(".swiper-button-prev")}},n={};if(t.dataset.swiperConfig)try{n=JSON.parse(t.dataset.swiperConfig)}catch(r){console.error("Invalid Swiper Config JSON for:",t,r)}let o={...e,...n};n.navigation&&(o.navigation={...e.navigation,...n.navigation}),n.autoplay&&(o.autoplay={...e.autoplay,...n.autoplay}),n.pagination&&(o.pagination={...e.pagination,...n.pagination}),new Swiper(t,o)})}}function y(){document.addEventListener("click",function(a){let t=a.target.closest(".js-ajax-pagination-link");if(!t)return;a.preventDefault();let e=t.closest(".js-ajax-grid");if(!e)return;let n=e.querySelector(".js-ajax-grid-content"),o=e.querySelector(".pagination"),r=t.dataset.page,i=e.dataset.queryArgs,d=e.dataset.templatePart||"";if(!r||!i)return;let l=e.dataset.loaderText||"\u062C\u0627\u0631\u064A \u062C\u0644\u0628 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A";e.classList.add("is-loading","pointer-events-none"),e.querySelector(".ajax-loader")||e.insertAdjacentHTML("afterbegin",`
                <div class="ajax-loader">
                    <div class="ajax-loader-container">
                        <div class="ajax-loader-spinner-wrapper">
                            <div class="ajax-loader-spinner"></div>
                            <div class="ajax-loader-logo">
                                <i class="fas fa-leaf text-2xl"></i>
                            </div>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="ajax-loader-text">${l}</div>
                            <div class="ajax-loader-dots">
                                <div class="ajax-loader-dot"></div>
                                <div class="ajax-loader-dot"></div>
                                <div class="ajax-loader-dot"></div>
                            </div>
                        </div>
                    </div>
                </div>
            `);let c=new FormData;c.append("action","greenergy_load_posts"),c.append("nonce",greenergyData.nonce),c.append("page",r),c.append("query_args",i),d&&c.append("template_part",d),fetch(greenergyData.ajaxUrl,{method:"POST",body:c}).then(s=>s.json()).then(s=>{if(s.success){n&&(n.innerHTML=s.data.content);let u=e.querySelector(".js-ajax-pagination-wrapper")||e.querySelector(".pagination")||e.querySelector(".greenergy-pagination");u?u.classList.contains("js-ajax-pagination-wrapper")?u.innerHTML=s.data.pagination:u.outerHTML=s.data.pagination:e.insertAdjacentHTML("beforeend",s.data.pagination),typeof AOS<"u"&&setTimeout(()=>{AOS.refreshHard()},100);let b=e.getBoundingClientRect().top+window.pageYOffset+-100;window.scrollTo({top:b,behavior:"smooth"})}else console.error("AJAX Error:",s)}).catch(s=>{console.error("Fetch Error:",s)}).finally(()=>{setTimeout(()=>{e.classList.remove("is-loading","pointer-events-none")},800)})})}function h(){document.querySelector(".js-hub-nav")&&(document.addEventListener("click",function(t){let e=t.target.closest(".js-hub-nav-link");if(!e)return;let n=document.querySelector(".js-hub-content-view")||document.querySelector("#primary");if(!n)return;t.preventDefault();let o=e.href,r=e.dataset.type;document.body.classList.add("is-hub-navigating"),n.classList.add("transition-all","duration-500","opacity-0","scale-95"),n.style.pointerEvents="none",fetch(o).then(i=>i.text()).then(i=>{let l=new DOMParser().parseFromString(i,"text/html"),c=l.querySelector(".js-hub-content-view")||l.querySelector("#primary");c?setTimeout(()=>{document.title=l.title,history.pushState({type:r},l.title,o),n.innerHTML=c.innerHTML,c.id==="primary"&&n.id==="primary"&&(n.className=c.className),S(),n.classList.remove("opacity-0","scale-95"),n.classList.add("opacity-100","scale-100")},300):window.location.href=o}).catch(i=>{console.error("Hub Nav Error:",i),window.location.href=o}).finally(()=>{setTimeout(()=>{n.style.pointerEvents="all",document.body.classList.remove("is-hub-navigating")},500)})}),window.addEventListener("popstate",function(){window.location.reload()}))}function S(){typeof AOS<"u"&&(AOS.refreshHard(),AOS.init()),document.dispatchEvent(new CustomEvent("greenergy:content-updated"))}function w(){p(),f(),g(),m(),v(),y(),h(),typeof AOS<"u"&&(AOS.init({duration:800,easing:"ease-in-out",once:!0,offset:50}),AOS.refresh())}document.addEventListener("DOMContentLoaded",w);document.addEventListener("greenergy:content-updated",w);window.Greenergy={version:"1.0.0"};})();
