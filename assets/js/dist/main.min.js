(() => {
  // assets/js/src/modules/navigation.js
  function initNavigation() {
    const mobileMenuToggle = document.querySelector("[data-mobile-menu-toggle]");
    const mobileMenuClose = document.querySelector("[data-mobile-menu-close]");
    const mobileMenu = document.getElementById("mobile-menu");
    const mobileMenuOverlay = document.querySelector("[data-mobile-menu-overlay]");
    if (!mobileMenu || !mobileMenuToggle)
      return;
    mobileMenuToggle.addEventListener("click", () => {
      mobileMenu.classList.add("is-open");
      mobileMenuOverlay?.classList.add("is-open");
      mobileMenuToggle.setAttribute("aria-expanded", "true");
      mobileMenu.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
    });
    const closeMobileMenu = () => {
      mobileMenu.classList.remove("is-open");
      mobileMenuOverlay?.classList.remove("is-open");
      mobileMenuToggle.setAttribute("aria-expanded", "false");
      mobileMenu.setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";
    };
    mobileMenuClose?.addEventListener("click", closeMobileMenu);
    mobileMenuOverlay?.addEventListener("click", closeMobileMenu);
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && mobileMenu.classList.contains("is-open")) {
        closeMobileMenu();
      }
    });
    initStickyHeader();
  }
  function initStickyHeader() {
    const header = document.querySelector(".site-header.sticky");
    if (!header)
      return;
    let lastScroll = 0;
    const scrollThreshold = 100;
    window.addEventListener("scroll", () => {
      const currentScroll = window.pageYOffset;
      if (currentScroll <= 0) {
        header.classList.remove("header-hidden");
        return;
      }
      if (currentScroll > lastScroll && currentScroll > scrollThreshold) {
        header.classList.add("header-hidden");
      } else if (currentScroll < lastScroll) {
        header.classList.remove("header-hidden");
      }
      lastScroll = currentScroll;
    }, { passive: true });
  }

  // assets/js/src/modules/lazyload.js
  function initLazyLoad() {
    const lazyImages = document.querySelectorAll('img[loading="lazy"]');
    if ("loading" in HTMLImageElement.prototype) {
      lazyImages.forEach((img) => {
        img.classList.add("lazy-fade");
        if (img.complete) {
          img.classList.add("loaded");
        } else {
          img.addEventListener("load", () => {
            img.classList.add("loaded");
          }, { once: true });
        }
      });
    } else {
      const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const img = entry.target;
            img.src = img.dataset.src || img.src;
            img.classList.add("loaded");
            observer.unobserve(img);
          }
        });
      });
      lazyImages.forEach((img) => {
        imageObserver.observe(img);
      });
    }
  }

  // assets/js/src/modules/theme-toggle.js
  function initThemeToggle() {
    const toggleButtons = document.querySelectorAll("[data-theme-toggle]");
    const html = document.documentElement;
    const savedTheme = localStorage.getItem("greenergy-theme");
    const systemPrefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
    if (savedTheme === "dark" || !savedTheme && systemPrefersDark) {
      html.classList.add("dark");
    }
    toggleButtons.forEach((button) => {
      button.addEventListener("click", () => {
        html.classList.toggle("dark");
        const isDark = html.classList.contains("dark");
        localStorage.setItem("greenergy-theme", isDark ? "dark" : "light");
      });
    });
    window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", (e) => {
      if (!localStorage.getItem("greenergy-theme")) {
        html.classList.toggle("dark", e.matches);
      }
    });
  }

  // assets/js/src/modules/counter.js
  var initCounter = () => {
    const counters = document.querySelectorAll(".js-counter");
    if (counters.length === 0)
      return;
    const countUp = (el) => {
      const target = parseFloat(el.getAttribute("data-target"));
      const duration = 2e3;
      const stepTime = 20;
      const steps = duration / stepTime;
      const increment = target / steps;
      let current = 0;
      const timer = setInterval(() => {
        current += increment;
        if (current >= target) {
          el.innerText = Math.floor(target).toLocaleString();
          clearInterval(timer);
        } else {
          el.innerText = Math.floor(current).toLocaleString();
        }
      }, stepTime);
    };
    const observerOptions = {
      threshold: 0.5
    };
    const observer = new IntersectionObserver((entries, observer2) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          countUp(entry.target);
          observer2.unobserve(entry.target);
        }
      });
    }, observerOptions);
    counters.forEach((counter) => {
      observer.observe(counter);
    });
  };

  // assets/js/src/modules/carousel.js
  function initCarousel() {
    const swiperContainers = document.querySelectorAll(".js-swiper-init");
    if (swiperContainers.length === 0)
      return;
    if (typeof Swiper === "undefined") {
      console.warn("Swiper library is not loaded. Carousel cannot be initialized.");
      return;
    }
    swiperContainers.forEach((container) => {
      const defaultOptions = {
        slidesPerView: 1,
        spaceBetween: 24,
        loop: true,
        autoplay: {
          delay: 5e3,
          disableOnInteraction: false
        },
        observer: true,
        observeParents: true,
        pagination: {
          el: container.querySelector(".swiper-pagination") || container.parentElement.querySelector(".swiper-pagination"),
          clickable: true
        },
        navigation: {
          nextEl: container.querySelector(".swiper-button-next") || container.parentElement.querySelector(".swiper-button-next"),
          prevEl: container.querySelector(".swiper-button-prev") || container.parentElement.querySelector(".swiper-button-prev")
        }
      };
      let customOptions = {};
      if (container.dataset.swiperConfig) {
        try {
          customOptions = JSON.parse(container.dataset.swiperConfig);
        } catch (e) {
          console.error("Invalid Swiper Config JSON for:", container, e);
        }
      }
      const options = { ...defaultOptions, ...customOptions };
      if (customOptions.navigation) {
        options.navigation = { ...defaultOptions.navigation, ...customOptions.navigation };
      }
      if (customOptions.autoplay) {
        options.autoplay = { ...defaultOptions.autoplay, ...customOptions.autoplay };
      }
      if (customOptions.pagination) {
        options.pagination = { ...defaultOptions.pagination, ...customOptions.pagination };
      }
      new Swiper(container, options);
    });
  }

  // assets/js/src/modules/ajax-pagination.js
  function initAjaxPagination() {
    document.addEventListener("click", function(e) {
      const link = e.target.closest(".js-ajax-pagination-link");
      if (!link)
        return;
      e.preventDefault();
      const container = link.closest(".js-ajax-grid");
      if (!container)
        return;
      const contentContainer = container.querySelector(".js-ajax-grid-content");
      const paginationContainer = container.querySelector(".pagination");
      const page = link.dataset.page;
      const queryArgs = container.dataset.queryArgs;
      const templatePart = container.dataset.templatePart || "";
      if (!page || !queryArgs)
        return;
      container.classList.add("opacity-50", "pointer-events-none");
      const formData = new FormData();
      formData.append("action", "greenergy_load_posts");
      formData.append("nonce", greenergyData.nonce);
      formData.append("page", page);
      formData.append("query_args", queryArgs);
      if (templatePart) {
        formData.append("template_part", templatePart);
      }
      fetch(greenergyData.ajaxUrl, {
        method: "POST",
        body: formData
      }).then((response) => response.json()).then((data) => {
        if (data.success) {
          if (contentContainer) {
            contentContainer.innerHTML = data.data.content;
          }
          const existingNav = container.querySelector(".pagination");
          if (existingNav) {
            existingNav.outerHTML = data.data.pagination;
          } else {
            container.insertAdjacentHTML("beforeend", data.data.pagination);
          }
          if (typeof AOS !== "undefined") {
            setTimeout(() => {
              AOS.refreshHard();
            }, 100);
          }
          const yOffset = -100;
          const y = container.getBoundingClientRect().top + window.pageYOffset + yOffset;
          window.scrollTo({ top: y, behavior: "smooth" });
        } else {
          console.error("AJAX Error:", data);
        }
      }).catch((error) => {
        console.error("Fetch Error:", error);
      }).finally(() => {
        container.classList.remove("opacity-50", "pointer-events-none");
      });
    });
  }

  // assets/js/src/main.js
  document.addEventListener("DOMContentLoaded", () => {
    initNavigation();
    initLazyLoad();
    initThemeToggle();
    initCounter();
    initCarousel();
    initAjaxPagination();
    if (typeof AOS !== "undefined") {
      AOS.init({
        duration: 800,
        easing: "ease-in-out",
        once: true,
        offset: 50
      });
    }
  });
  window.Greenergy = {
    version: "1.0.0"
  };
})();
